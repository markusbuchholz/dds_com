cmake_minimum_required(VERSION 3.16)
project(hello_cyclonedds CXX)
set(CMAKE_CXX_STANDARD 17)

# Find Cyclone DDS headers & lib (installed in the image)
find_path(CYCLONEDDS_INCLUDE_DIR dds/dds.h)
find_library(CYCLONEDDS_LIB dds)
if (NOT CYCLONEDDS_INCLUDE_DIR OR NOT CYCLONEDDS_LIB)
  message(FATAL_ERROR "Cyclone DDS not found. Is it installed in the image?")
endif()

include_directories(${CYCLONEDDS_INCLUDE_DIR})
include_directories(${CMAKE_SOURCE_DIR}/gen_c)  # for demo_Hello.h

add_executable(cpp_publisher
  cpp_publisher.cpp
  gen_c/demo_Hello.c     # generated by idlc -l c
)
target_link_libraries(cpp_publisher ${CYCLONEDDS_LIB})
